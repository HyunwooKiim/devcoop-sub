# SaaS 구독 / 결제 시스템

## Flow

> 유저가 Plan에 대해 Subscription을 맺고, 그 과정에서 Payment가 발생한다

## 과제 내용

- 어그리거트의 개념을 학습한 뒤 memo.md에 정리한다
- 어그리거트의 개념을 적용하여 SaaS 구독 / 결제 시스템을 구현한다

## 요구사항

- plain 자바를 이용한다. (Spring, JPA 사용 금지)
- 코드를 짤 때 AI 사용은 허용하나, **어그리거트 선정과 설계(어떤 애그리거트가 무엇을 책임지는지)는 AI를 사용하지 않고 직접 한다.**
- 어그리거트 지도 다이어그램을 구성한 뒤 이미지를 캡처하여 올린다.
  - 각 박스에 Aggregate 이름, 주요 속성, 핵심 메서드를 간단히 표기한다.
  - Aggregate 간에는 ID 기반 참조를 화살표로 표현한다.
- 최소 2개 이상 어그리거트를 설계한다.

## 시나리오

> 유저는 플랜(Free/Pro/Business)에 가입한다.  
> 플랜별로 가격, 기간, 기능/용량 제한이 다르다.  
> 구독은 갱신/해지/일시정지 상태를 가진다.  
> 과금(결제 시도, 실패, 환불)은 따로 트래킹한다.

추가 도메인 규칙 (예시):

- 유저는 동시에 하나의 유료 플랜만 ACTIVE 상태로 가질 수 있다.
- 결제가 실패하면 구독 상태가 PAST_DUE로 변경된다.
- 플랜 가격이 바뀌어도, 기존 구독자는 기존 가격으로 유지될 수 있다.
